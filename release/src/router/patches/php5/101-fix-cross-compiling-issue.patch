--- php5/configure
+++ php5/configure
@@ -36577,6 +36577,9 @@
     libmagic/is_tar.c libmagic/magic.c libmagic/print.c \
     libmagic/readcdf.c libmagic/softmagic.c"
 
+# evaluated by running test program on the target
+libmagic_sources="$libmagic_sources libmagic/strcasestr.c"
+if false; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for strcasestr" >&5
 $as_echo_n "checking for strcasestr... " >&6; }
   if test "$cross_compiling" = yes; then :
@@ -36631,6 +36634,7 @@
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
+fi
 
 
 
@@ -66548,6 +66552,10 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $msg" >&5
 $as_echo "$msg" >&6; }
 
+# evaluated by running test program on the target
+flock_type=linux
+$as_echo "#define HAVE_FLOCK_LINUX /**/" >>confdefs.h
+if false; then
 flock_type=unknown
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking \"whether flock struct is linux ordered\"" >&5
 $as_echo_n "checking \"whether flock struct is linux ordered\"... " >&6; }
@@ -66625,6 +66633,7 @@
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
+fi
 
 
 if test "$flock_type" = "unknown"; then
